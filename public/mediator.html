<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Vivi Box Simulator</title>
  <style>
    body { font-family: system-ui, sans-serif; margin: 8px; }
    iframe { border: 1px solid #ccc; width: 49%; height: 80vh; }
    .row { display:flex; gap:8px; }
  </style>
</head>
<body>
  <h1>Box Simulator</h1>
  <p>This page loads Client and Signage side-by-side and forwards messages between them.</p>
  <div class="row">
    <iframe id="client" src="./client"></iframe>
    <iframe id="signage" src="./signage"></iframe>
  </div>

  <script>
    const client = document.getElementById('client');
    const signage = document.getElementById('signage');

    window.addEventListener('message', (ev) => {
      try {
        const src = ev.source;
        if (src === client.contentWindow) {
          signage.contentWindow.postMessage(ev.data, '*');
        } else if (src === signage.contentWindow) {
          client.contentWindow.postMessage(ev.data, '*');
        }
      } catch (err) {
        console.error('Mediator error', err);
      }
    });
  </script>
</body>
</html>
